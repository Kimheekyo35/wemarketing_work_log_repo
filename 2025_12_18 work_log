# 2025_12_18 work_log

🔥 금일 목표
 - 로컬에서 2개 url 크롤링한 후 db 저장까지 완료
 
🚦 업무 순서
 - css selector에 문제가 발생하여 수정
 - 새로운 DB 생성 및 column 추가하기

🚨 문제점
 ① CSS Selector 왜 안 잡히는지
  - "a[class*='product-item-link']" → 가능하지만, XPath로 보던 구조와 실제 렌더링 구조가 달라서 선택이 안 된 경우가 있었음.
  "div[class*='product-item-info']" 썼는데도 안 잡히는 이유는:
    1. li안에 그 div가 직접 포함되지 않거나, find_element가 하위 전체를 탐색하기 전에 실패하거나
    2. 셀렉터 문자열에 오타가 들어가거나
    3. 페이지의 로딩시간이 길어서 element가 늦게 나타나는 경우가 있을 수도 있었음
    
② li → div → 제품 정보 접근 구조
  내 html 구조:
  <li class="item product product-item">
    <div class="product-item-info" data-product-id="27137" data-name="...">

  올바른 셀렉터 (띄어쓰기는 하위 구조를 의미함):
    li.item.product.product-item

③ TypeError: 'NoneType' object is not callable 문제
  .text 는 함수가 아니라 속성값이기 때문에 괄호를 쓰면 안 됨

④ 제품 가격이 N/A로만 나오는 문제
  selector 자리에 By.CSS_SELECTOR 문자열을 넣어서 계속된 오류 발생

  el = item.find_element(By.CSS_SELECTOR, "[data-price-amount]")
  price_amout = el.get_attribute("data-price-amout")

  or

  el = driver.find_element(
    By.CSS_SELECTOR,
    "span[data-price-type='rrpPrice']")
  amount = el.get_attribute("data-price-amount")
  
  이렇게 작성해야 속성을 갖고 옴

 ⑤ 요소 selector 대괄호 써도 되는지?
   ㅇㅇ

💫✏️📌

Selector vs Attribute 정리하고 가기
✏️  Selector(CSS Selector)
- HTML 요소를 찾기 위해 사용하는 표현식

✏️  HTML Attribute (요소가 가진 속성)
- HTML 태그 내부에 있는 key=value 형태의 데이터

❌ 오늘 내가 잘못한 부분
_safe_find_attr(al, By.CSS_SELECTOR, "data-price-amount")
selector부분에 계속 attribute 이름을 적어두고 있었음
